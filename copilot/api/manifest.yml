name: api
type: Load Balanced Web Service

http:
  path: '/'
  alias:
    - name: api.dev.getfine.pro
      hosted_zone: Z0711681207QBQSC8P8TL
  healthcheck:
    path: /health
    healthy_threshold: 2
    unhealthy_threshold: 5
    interval: 15s
    timeout: 10s
    grace_period: 120s

image:
  build: apps/api/Dockerfile
  port: 3001

cpu: 512
memory: 1024
count: 1
exec: true
network:
  connect: true

secrets:
  ANTHROPIC_API_KEY: /copilot/applications/fine/anthropic-api-key
