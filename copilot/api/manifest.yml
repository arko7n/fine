name: api
type: Load Balanced Web Service

http:
  path: '/'
  healthcheck:
    path: /health
    healthy_threshold: 2
    unhealthy_threshold: 5
    interval: 15s
    timeout: 10s
    grace_period: 180s

image:
  build:
    dockerfile: apps/api/Dockerfile
    context: .
  port: 3001

cpu: 1024
memory: 2048
count:
  range: 1-10
  cpu_percentage: 70
exec: true
network:
  connect: false

secrets:
  ANTHROPIC_API_KEY: /copilot/applications/fine/anthropic-api-key
  PGPASSWORD: /copilot/applications/fine/pg-password
  PLAID_CLIENT_ID: /copilot/applications/fine/plaid-client-id
  PLAID_SECRET: /copilot/applications/fine/plaid-secret
  CLERK_PUBLISHABLE_KEY: /copilot/applications/fine/clerk-publishable-key
  CLERK_SECRET_KEY: /copilot/applications/fine/clerk-secret-key
  PIPEDREAM_CLIENT_ID: /copilot/applications/fine/pipedream-client-id
  PIPEDREAM_CLIENT_SECRET: /copilot/applications/fine/pipedream-client-secret
