name: api
type: Load Balanced Web Service

http:
  path: '/'
  healthcheck:
    path: /health
    healthy_threshold: 2
    unhealthy_threshold: 5
    interval: 15s
    timeout: 10s
    grace_period: 180s

image:
  build: apps/api/Dockerfile
  port: 3001

cpu: 512
memory: 1024
count:
  range: 1-10
  cpu_percentage: 70
exec: true
network:
  connect: false

secrets:
  ANTHROPIC_API_KEY: /copilot/applications/fine/anthropic-api-key
  PGPASSWORD: /copilot/applications/fine/pg-password
  PLAID_CLIENT_ID: /copilot/applications/fine/plaid-client-id
  PLAID_SECRET: /copilot/applications/fine/plaid-secret
  CLERK_PUBLISHABLE_KEY: /copilot/applications/fine/clerk-publishable-key
  CLERK_SECRET_KEY: /copilot/applications/fine/clerk-secret-key